<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Benchmark · CaNNOLeS.jl</title><meta name="title" content="Benchmark · CaNNOLeS.jl"/><meta property="og:title" content="Benchmark · CaNNOLeS.jl"/><meta property="twitter:title" content="Benchmark · CaNNOLeS.jl"/><meta name="description" content="Documentation for CaNNOLeS.jl."/><meta property="og:description" content="Documentation for CaNNOLeS.jl."/><meta property="twitter:description" content="Documentation for CaNNOLeS.jl."/><script data-outdated-warner src="../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../search_index.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script><link href="../assets/style.css" rel="stylesheet" type="text/css"/></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../"><img src="../assets/logo.png" alt="CaNNOLeS.jl logo"/></a><div class="docs-package-name"><span class="docs-autofit"><a href="../">CaNNOLeS.jl</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../">Home</a></li><li><a class="tocitem" href="../tutorial/">Tutorial</a></li><li class="is-active"><a class="tocitem" href>Benchmark</a></li><li><a class="tocitem" href="../reference/">Reference</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>Benchmark</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Benchmark</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/JuliaSmoothOptimizers/CaNNOLeS.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/JuliaSmoothOptimizers/CaNNOLeS.jl/blob/main/docs/src/benchmark.md" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><p>With a JSO-compliant solver, such as CaNNOLeS, we can run the solver on a set of problems, explore the results, and compare to other JSO-compliant solvers using specialized benchmark tools.  We are following here the tutorial in <a href="https://juliasmoothoptimizers.github.io/SolverBenchmark.jl/v0.3/tutorial/">SolverBenchmark.jl</a> to run benchmarks on JSO-compliant solvers.</p><pre><code class="language-julia hljs">using NLSProblems, NLPModels</code></pre><p>To test the implementation of CaNNOLeS, we use the package <a href="https://github.com/JuliaSmoothOptimizers/NLSProblems.jl">NLSProblems.jl</a>, which implements <code>NLSProblemsModel</code> an instance of <code>AbstractNLPModel</code>. </p><pre><code class="language-julia hljs">using SolverBenchmark</code></pre><p>Let us select equality-constrained problems from NLSProblems with a maximum of 10000 variables or constraints. After removing problems with fixed variables, examples with a constant objective, and infeasibility residuals, we are left with 82 problems.</p><pre><code class="language-julia hljs">problems = (NLSProblems.eval(problem)() for problem in filter(x -&gt; x != :NLSProblems, names(NLSProblems)) )</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">Base.Generator{Vector{Symbol}, Main.var&quot;#1#3&quot;}(Main.var&quot;#1#3&quot;(), [:BNST2, :BNST3, :LVcon501, :LVcon502, :LVcon503, :LVcon504, :LVcon511, :LVcon512, :LVcon513, :LVcon514  …  :tp354, :tp355, :tp358, :tp370, :tp371, :tp372, :tp373, :tp379, :tp394, :tp395])</code></pre><p>We compare here CaNNOLeS with <code>tron</code> (Chih-Jen Lin and Jorge J. Moré, Newton&#39;s Method for Large Bound-Constrained Optimization Problems, SIAM J. Optim., 9(4), 1100–1127, 1999.), and <code>trunk</code> (A. R. Conn, N. I. M. Gould, and Ph. L. Toint (2000). Trust-Region Methods, volume 1 of MPS/SIAM Series on Optimization.) implemented in <a href="https://github.com/JuliaSmoothOptimizers/JSOSolvers.jl">JSOSolvers.jl</a> on a subset of NLSProblems problems.</p><pre><code class="language-julia hljs">using CaNNOLeS, JSOSolvers</code></pre><p>To make stopping conditions comparable, we set <code>tron</code>&#39;s and <code>trunk</code>&#39;s parameters <code>atol=0.0</code>, and <code>rtol=1e-5</code>.</p><pre><code class="language-julia hljs">#Same time limit for all the solvers
max_time = 1200. #20 minutes

solvers = Dict(
  :tron =&gt; nlp -&gt; tron(
    nlp,
    atol = 0.0,
    rtol = 1e-5,
  ),
  :trunk =&gt; nlp -&gt; trunk(
    nlp,
    atol = 0.0,
    rtol = 1e-5,
  ),
  :cannoles =&gt; nlp -&gt; cannoles(
    nlp,
    atol = 0.0,
    rtol = 1e-5,
  ),
)

stats = bmark_solvers(solvers, problems, skipif = nls -&gt; !NLPModels.unconstrained(nls))</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">Dict{Symbol, DataFrames.DataFrame} with 3 entries:
  :tron     =&gt; <span class="sgr1">88×40 DataFrame</span>…
  :trunk    =&gt; <span class="sgr1">88×40 DataFrame</span>…
  :cannoles =&gt; <span class="sgr1">88×44 DataFrame</span>…</code></pre><p>The function <code>bmark_solvers</code> return a <code>Dict</code> of <code>DataFrames</code> with detailed information on the execution. This output can be saved in a data file.</p><pre><code class="language-julia hljs">using JLD2
@save &quot;trunk_cannoles_$(string(length(problems))).jld2&quot; stats</code></pre><p>The result of the benchmark can be explored via tables,</p><pre><code class="language-julia hljs">pretty_stats(stats[:cannoles])</code></pre><p>or it can also be used to make performance profiles.</p><pre><code class="language-julia hljs">using Plots
gr()

legend = Dict(
  :neval_obj =&gt; &quot;number of f evals&quot;,
  :neval_residual =&gt; &quot;number of F evals&quot;,
  :neval_cons =&gt; &quot;number of c evals&quot;,
  :neval_grad =&gt; &quot;number of ∇f evals&quot;,
  :neval_jac =&gt; &quot;number of ∇c evals&quot;,
  :neval_jprod =&gt; &quot;number of ∇c*v evals&quot;,
  :neval_jtprod  =&gt; &quot;number of ∇cᵀ*v evals&quot;,
  :neval_hess  =&gt; &quot;number of ∇²f evals&quot;,
  :elapsed_time =&gt; &quot;elapsed time&quot;
)
perf_title(col) = &quot;Performance profile on NLSProblems w.r.t. $(string(legend[col]))&quot;

styles = [:solid, :dash, :dot, :dashdot]

function print_pp_column(col::Symbol, stats)

  ϵ = minimum(minimum(filter(x -&gt; x &gt; 0, df[!, col])) for df in values(stats))
  first_order(df) = df.status .== :first_order
  unbounded(df) = df.status .== :unbounded
  solved(df) = first_order(df) .| unbounded(df)
  cost(df) = (max.(df[!, col], ϵ) + .!solved(df) .* Inf)

  p = performance_profile(
    stats,
    cost,
    title=perf_title(col),
    legend=:bottomright,
    linestyles=styles
  )
end

print_pp_column(:elapsed_time, stats) # with respect to time</code></pre><img src="05eaf8c4.svg" alt="Example block output"/><pre><code class="language-julia hljs">print_pp_column(:neval_residual, stats) # with respect to number of residual function evaluations</code></pre><img src="b63c6958.svg" alt="Example block output"/></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../tutorial/">« Tutorial</a><a class="docs-footer-nextpage" href="../reference/">Reference »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.11.4 on <span class="colophon-date" title="Wednesday 4 June 2025 21:59">Wednesday 4 June 2025</span>. Using Julia version 1.11.5.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
